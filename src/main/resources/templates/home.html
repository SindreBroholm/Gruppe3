<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">


<head>
    <meta charset="UTF-8">
    <meta name="description" content="fastis profile page">
    <meta name="author" content="fastis">
    <link th:href="@{/styles/home.css}" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>Home</title>
</head>

<body>
<div class="navbar">
    <div class="dropdown">
        <button onclick="myFunction()" class="dropbtn"><i class="material-icons clicker">menu</i>
        </button>
        <div id="myDropdown" class="dropdown-content">
            <a href="/profile">Settings</a>
            <a href="/boards">My boards</a>
            <a href="#">Eventstream</a>
            <a href="/createboard">Create board</a>
        </div>
    </div>
    <a class="material-icons" href="/profile">person</a>
    <a href="/search" style="float: right">Search</a>
    <a class="material-icons" style="float: left" href="#">notifications</a>
</div>

<div sec:authorize="isAuthenticated()">
    <div style="align-content: center; justify-content: center;"
         th:text="${#dates.format(#dates.createNow(), 'MMMMM')}"></div>
    <ul class="events" th:each="events : ${eventList}">
        <li id="eventName" th:text="${events.name}"></li>
        <div id="dateBox">
            <i id="datotagg" class="material-icons">bookmark</i>
            <div id="dateDisplay">
                <div th:text="${events.day}"></div>
                <div id="dayInMonth" th:text="${events.datetime_from.dayOfMonth}"></div>
                <div id="spacer" th:text="'/'"></div>
                <div id="monthInYear" th:text="${events.datetime_from.getMonthValue()}"></div>
            </div>
        </div>
        <div id="eventMessage" th:text="${events.message}"></div>
    </ul>
</div>

<div sec:authorize="!isAuthenticated()">
    <a href="/login"> You are currently not logged in, click this link to log in.</a>
</div>
<script>
    function myFunction() {
        document.getElementById("myDropdown").classList.toggle("show");
    }

    let clickerNode = document.getElementsByClassName("clicker");
    clickerNode.addEventListener("click", () => myFunction())

    window.onclick = function (event) {
        if (!event.target.matches('.dropbtn')) {
            let dropdowns = document.getElementsByClassName("dropdown-content");
            let i;
            for (i = 0; i < dropdowns.length; i++) {
                let openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            }
        }
    }
</script>
</body>

</html>